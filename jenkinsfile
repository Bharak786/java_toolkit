pipeline {
  agent any
  
  parameters {
        activeChoiceParam('JAVA_VERSION') {
            description 'Select the Java version to use'
            groovyScript """
                def versions = ['8', '11', '17']
                return versions.sort()
            """
        }
    }
  
  stages {
    stage('Build Docker image') {
      steps {
          cd ${WORKSPACE}
          sh "docker build --build-arg JAVA_VERSION=${javaVersion} -t repository.nobroker.in:9094/devops/baseimage-java:${JAVA_VERSION} --file=Dockerfile ${WORKSPACE}"   
      }
    }
   }
 }
